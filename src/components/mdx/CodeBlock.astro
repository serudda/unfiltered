---
import CodeBlockIsland from '@/components/islands/CodeBlock';

interface Props {
	children?: any;
	className?: string;
	[key: string]: any;
}

const props = Astro.props;

// Get the code content from the slot
const slotHTML = await Astro.slots.render('default');

// Extract plain text code by removing HTML tags
function extractTextFromHTML(html: string): string {
	let text = html.replace(/<[^>]+>/g, '');
	// Decode HTML entities
	text = text.replace(/&lt;/g, '<')
	           .replace(/&gt;/g, '>')
	           .replace(/&amp;/g, '&')
	           .replace(/&quot;/g, '"')
	           .replace(/&#39;/g, "'");
	return text.trim();
}

const code = extractTextFromHTML(slotHTML);
---

<CodeBlockIsland
	client:visible
	code={code}
	className="my-6"
/>
