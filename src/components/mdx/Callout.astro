---
import { tv, type VariantProps } from 'tailwind-variants';
import { InfoIcon, TriangleAlertIcon, LightbulbIcon, OctagonAlertIcon } from 'lucide-react';

const callout = tv({
  base: 'my-6 rounded-r-lg border-l-4 p-4',
  variants: {
    variant: {
      note: 'border-primary-500/40 bg-primary-500/10 text-primary-700 dark:text-primary-300',
      warning: 'border-amber-500/40 bg-amber-500/10 text-amber-700 dark:text-amber-300',
      tip: 'border-emerald-500/40 bg-emerald-500/10 text-emerald-700 dark:text-emerald-300',
      caution: 'border-red-500/40 bg-red-500/10 text-red-700 dark:text-red-300',
    },
  },
  defaultVariants: {
    variant: 'note',
  },
});

interface Props extends VariantProps<typeof callout> {
  variant?: 'note' | 'warning' | 'tip' | 'caution';
}

const { variant = 'note' } = Astro.props as Props;

const styles = callout({ variant });

const Icon = {
  note: InfoIcon,
  warning: TriangleAlertIcon,
  tip: LightbulbIcon,
  caution: OctagonAlertIcon,
}[variant || 'note'];
---

<div class={styles}>
  <div class="flex items-start gap-4">
    <Icon className="mt-0.5 size-5 shrink-0" />
    <div class="flex-1 [&>p:last-child]:mb-0">
      <slot />
    </div>
  </div>
</div>
