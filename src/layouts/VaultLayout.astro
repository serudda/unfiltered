---
import type { CollectionEntry } from 'astro:content';
import BaseLayout from './Layout.astro';
import Header from '@/components/site/Header.astro';
import { DynamicIcon } from '@/components/ui/DynamicIcon';
import SkillList from '@/components/skills/SkillList.astro';

interface Props {
  frontmatter: CollectionEntry<'vaults'>['data'];
  canonical: string;
  skills: CollectionEntry<'skills'>[];
}

const { frontmatter, canonical, skills } = Astro.props;
---


<BaseLayout
  title={frontmatter.name}
  description={frontmatter.description}
  canonical={canonical}
  lang="en"
>
  <Header />

  <main class="py-20">
    <article>
      <!-- Vault Breadcrumb -->
      <nav class="mb-6">
        <a
          href="/skills/"
          class="text-sm text-muted-foreground hover:text-primary-300 transition-colors"
        >
          ← Back to all skills
        </a>
      </nav>
      

      <!-- Vault Header -->
      <header>        
        <h1 class="mb-1 text-3xl font-bold flex items-center gap-3">
          <DynamicIcon name={frontmatter.icon} className="text-purple-600 size-5" client:load />
          {frontmatter.name}
        </h1>
        <p class="text-lg text-muted-foreground">{frontmatter.description}</p>
      </header>

      <!-- Skills in this vault (dynamically fetched) -->
      {skills.length > 0 && (
        <section class="mt-10">
          <h2 class="text-xl font-semibold mb-2 ml-1">Skills in this vault</h2>
          <SkillList class='border border-border rounded-lg' skills={skills} />
        </section>
      )}

      <hr class="border-dashed-x my-10" />

      <!-- Vault Content -->
      <div class="text-xl text-foreground">
        <slot />
      </div>

      <!-- Back to Skills -->
      <div class="mt-16 pt-8 border-t border-border">
        <a
          href="/skills/"
          class="text-sm text-muted-foreground hover:text-primary-300 transition-colors"
        >
          ← Back to all skills
        </a>
      </div>
    </article>
  </main>
</BaseLayout>
